window.addEventListener("load",function(){function e(e,n,d){var a=e.scrollTop,l=n-a,i=function(n){n+=20;var r=t(n,a,l,d);e.scrollTop=r,n<d&&setTimeout(function(){i(n)},20)};i(0)}function t(e,t,n,d){return(e/=d/2)<1?n/2*e*e+t:(e-=1,-n/2*(e*(e-2)-1)+t)}function n(e){for(var t="",n=0;n<e.length;n++)t=0==n?n+"="+e[n]:t+"&"+n+"="+e[n];return t}function d(e){for(var t=JSON.parse(e),n=document.querySelector(".gallery_display"),d=0;d<t.length;d++){var a=document.createElement("div");a.classList.add("img_container");var l=document.createElement("div");l.classList.add("img_actions"),a.appendChild(l);var i=document.createElement("div");i.classList.add("img_plus"),i.classList.add("add_collection"),i.dataset.id=t[d].id,i.dataset.like=t[d].like,i.innerHTML="CLICK FOR <br> MORE INFORMATIONS",l.appendChild(i);var r=document.createElement("div");r.classList.add("corner_top_left"),l.appendChild(r);var s=document.createElement("div");s.classList.add("corner_top_right"),l.appendChild(s);var o=document.createElement("div");o.classList.add("corner_bottom_left"),l.appendChild(o);var c=document.createElement("div");c.classList.add("corner_bottom_right"),l.appendChild(c),a.appendChild(l);var p=document.createElement("img");p.src=t[d].url,p.classList.add("img_img"),a.appendChild(p),n.appendChild(a);var m=document.createElement("div");m.classList.add("modal"),a.appendChild(m);var h=document.createElement("div");h.classList.add("line_close"),m.appendChild(h);var v=document.createElement("div");v.classList.add("modal_close"),v.innerHTML=">",m.appendChild(v);var E=document.createElement("div");E.classList.add("modal_content"),m.appendChild(E);var g=document.createElement("img");g.classList.add("modal_img"),g.src=t[d].url,E.appendChild(g);var y=document.createElement("div");y.classList.add("modal_infos"),E.appendChild(y);var L=document.createElement("h3");L.innerHTML="PHOTO <em> #"+t[d].id+"</em>",y.appendChild(L);var f=document.createElement("ul");y.appendChild(f);var C=document.createElement("li");C.innerHTML="Date : "+t[d].date,f.appendChild(C);var _=document.createElement("li2");_.innerHTML="Camera : "+t[d].camera,f.appendChild(_);var T=document.createElement("div");if(T.classList.add("add_button"),T.classList.add("add_collection"),T.dataset.id=t[d].id,T.dataset.like=t[d].like,y.appendChild(T),"true"==t[d].session)if("false"==t[d].like)T.innerHTML="+ ADD TO YOUR COLLECTION";else{var S=document.createElement("a");S.href="?delete="+t[d].id,S.innerHTML="- DELETE FROM YOUR COLLECTION",T.appendChild(S)}else{var k=document.createElement("a");k.href="pages/sign_up.php",k.innerHTML="SUBSCRIBE TO SAVE PICTURE",T.appendChild(k)}var w=document.createElement("a");w.href="pages/sign_up.php",w.classList.add("twitter"),w.innerHTML="https://twitter.com/intent/tweet?text=Rover's Eyes Photo nÂ°"+t[d].id+" "+t[d].url,y.appendChild(w),w.innerHTML="TWEET";var q=document.createElement("img");q.src="assets/img/twitter.png",w.appendChild(q),v.addEventListener("click",function(){this.parentNode.style.display="none"}),l.addEventListener("click",function(){this.nextElementSibling.nextElementSibling.style.display="block"}),T.addEventListener("click",function(){if("false"==this.dataset.like){u[u.length]=this.dataset.id,this.dataset.like="true",this.dataset.test="true";document.querySelector(".add_popup").style.display="inherit"}else{var e=0;for(this.dataset.like="false";e<u.length;)u[e]==this.dataset.id?(u.splice(e,1),e=u.length+1):e++}})}}var a=document.querySelector("body"),l=document.querySelector(".loader"),i=document.querySelector("header"),r=document.querySelector("#content"),s=document.querySelector(".back_top"),o=(document.querySelectorAll(".log_out"),document.querySelector(".accueil"));document.querySelector(".gallery_display");a.classList.remove("preload"),l.style.display="none",i.classList.remove("preload"),r.classList.remove("preload"),window.addEventListener("scroll",function(){document.body.scrollTop>=1800?s.style.display="inherit":s.style.display="none"}),s.addEventListener("click",function(){e(document.body,0,1e3)});for(var c=document.querySelectorAll(".add_collection"),a=document.querySelector("body"),u=[],p=0;p<c.length;p++)"true"==c[p].dataset.like&&(u[u.length]=c[p].dataset.id);var m=1,h=!1;window.addEventListener("scroll",function(){if(document.body.classList.contains("accueil")&&o.scrollTop==getScrollTopMax()&&(m+=1,h=!0)){var e=new XMLHttpRequest;e.onreadystatechange=function(){4===e.readyState&&200===e.status&&d(e.responseText)},e.open("POST","includes/upload_more_picture.php",!0),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),e.send("load="+m)}}),getScrollTopMax=function(){var e;return null!=(e=document.scrollingElement.scrollTopMax)?e:document.scrollingElement.scrollHeight-document.documentElement.clientHeight};for(var p=0;p<c.length;p++)c[p].addEventListener("click",function(){if("false"==this.dataset.like)u[u.length]=this.dataset.id,this.dataset.like="true",this.dataset.test="true";else{var e=0;for(this.dataset.like="false";e<u.length;)u[e]==this.dataset.id?(u.splice(e,1),e=u.length+1):e++}});window.addEventListener("beforeunload",function(){var e=new XMLHttpRequest;e.onreadystatechange=function(){4===e.readyState&&200===e.status&&e.responseText},e.open("POST","./includes/add_user_galery.php",!0),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded");var t=n(u);e.send(t)});for(var v=document.querySelectorAll(".img_actions"),p=(document.querySelectorAll(".modal"),document.querySelectorAll(".add_button"),0);p<v.length;p++)v[p].addEventListener("click",function(){this.nextElementSibling.nextElementSibling.style.display="block"});var E=document.querySelector(".dropdown"),g=document.querySelector(".dropdown_menu");E.addEventListener("click",function(){"true"==this.dataset.toggle?(g.style.display="none",this.dataset.toggle="false"):(g.style.display="block",this.dataset.toggle="true")})});