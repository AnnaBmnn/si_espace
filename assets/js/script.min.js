window.addEventListener("load",function(){function e(e,n,d){var a=e.scrollTop,l=n-a,i=function(n){n+=20;var o=t(n,a,l,d);e.scrollTop=o,n<d&&setTimeout(function(){i(n)},20)};i(0)}function t(e,t,n,d){return(e/=d/2)<1?n/2*e*e+t:(e-=1,-n/2*(e*(e-2)-1)+t)}function n(e){for(var t="",n=0;n<e.length;n++)t=0==n?n+"="+e[n]:t+"&"+n+"="+e[n];return t}function d(e){for(var t=JSON.parse(e),n=document.querySelector(".gallery_display"),d=0;d<t.length;d++){var a=document.createElement("div");a.classList.add("img_container");var l=document.createElement("div");l.classList.add("img_actions"),a.appendChild(l);var i=document.createElement("div");i.classList.add("img_plus"),i.classList.add("add_collection"),i.dataset.id=t[d].id,i.dataset.like=t[d].like,i.innerHTML="CLICK FOR <br> MORE INFORMATIONS",l.appendChild(i);var o=document.createElement("div");o.classList.add("corner_top_left"),l.appendChild(o);var r=document.createElement("div");r.classList.add("corner_top_right"),l.appendChild(r);var s=document.createElement("div");s.classList.add("corner_bottom_left"),l.appendChild(s);var c=document.createElement("div");c.classList.add("corner_bottom_right"),l.appendChild(c),a.appendChild(l);var u=document.createElement("img");u.src=t[d].url,u.classList.add("img_img"),a.appendChild(u),n.appendChild(a);var p=document.createElement("div");p.classList.add("modal"),a.appendChild(p);var h=document.createElement("div");h.classList.add("line_close"),p.appendChild(h);var v=document.createElement("div");v.classList.add("modal_close"),v.innerHTML=">",p.appendChild(v);var y=document.createElement("div");y.classList.add("modal_content"),p.appendChild(y);var g=document.createElement("img");g.classList.add("modal_img"),g.src=t[d].url,y.appendChild(g);var E=document.createElement("div");E.classList.add("modal_infos"),y.appendChild(E);var L=document.createElement("h3");L.innerHTML="PHOTO <em> #"+t[d].id+"</em>",E.appendChild(L);var f=document.createElement("ul");E.appendChild(f);var _=document.createElement("li");_.innerHTML="Date : "+t[d].date,f.appendChild(_);var C=document.createElement("li2");C.innerHTML="Camera : "+t[d].camera,f.appendChild(C);var S=document.createElement("div");if(S.classList.add("add_button"),S.classList.add("add_collection"),S.dataset.id=t[d].id,S.dataset.like=t[d].like,E.appendChild(S),"true"==t[d].session)if("false"==t[d].like)S.innerHTML="+ ADD TO YOUR COLLECTION";else{var T=document.createElement("a");T.href="?delete="+t[d].id,T.innerHTML="- DELETE FROM YOUR COLLECTION",S.appendChild(T)}else{var k=document.createElement("a");k.href="pages/sign_up.php",k.innerHTML="SUBSCRIBE TO SAVE PICTURE",S.appendChild(k)}var q=document.createElement("a");q.href="pages/sign_up.php",q.classList.add("twitter"),q.innerHTML="https://twitter.com/intent/tweet?text=Rover's Eyes Photo nÂ°"+t[d].id+" "+t[d].url,E.appendChild(q),q.innerHTML="TWEET";var w=document.createElement("img");w.src="assets/img/twitter.png",q.appendChild(w),v.addEventListener("click",function(){document.querySelector(".add_popup").style.display="none",this.parentNode.style.display="none"}),l.addEventListener("click",function(){this.nextElementSibling.nextElementSibling.style.display="block"}),S.addEventListener("click",function(){if("false"==this.dataset.like){m[m.length]=this.dataset.id,this.dataset.like="true",this.dataset.test="true";document.querySelector(".add_popup").style.display="inherit"}else{var e=0;for(this.dataset.like="false";e<m.length;)m[e]==this.dataset.id?(m.splice(e,1),e=m.length+1):e++}})}}var a=document.querySelector("body"),l=document.querySelector(".loader"),i=document.querySelector("header"),o=document.querySelector("#content"),r=document.querySelector(".back_top"),s=(document.querySelectorAll(".log_out"),document.querySelector(".accueil")),c=(document.querySelector(".gallery_display"),document.querySelectorAll(".add_collection")),a=document.querySelector("body"),u=1,p=!1,m=[];a.classList.remove("preload"),l.style.display="none",i.classList.remove("preload"),o.classList.remove("preload"),window.addEventListener("scroll",function(){document.body.scrollTop>=1800?r.style.display="inherit":r.style.display="none"}),r.addEventListener("click",function(){e(document.body,0,1e3)});for(var h=0;h<c.length;h++)"true"==c[h].dataset.like&&(m[m.length]=c[h].dataset.id);getScrollTopMax=function(){var e;return null!=(e=document.scrollingElement.scrollTopMax)?e:document.scrollingElement.scrollHeight-document.documentElement.clientHeight},window.addEventListener("scroll",function(){if(document.body.classList.contains("accueil")&&s.scrollTop==getScrollTopMax()&&(u+=1,p=!0)){var e=new XMLHttpRequest;e.onreadystatechange=function(){4===e.readyState&&200===e.status&&d(e.responseText)},e.open("POST","includes/upload_more_picture.php",!0),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),e.send("load="+u)}});for(var h=0;h<c.length;h++)c[h].addEventListener("click",function(){if("false"==this.dataset.like)m[m.length]=this.dataset.id,this.dataset.like="true";else{var e=0;for(this.dataset.like="false";e<m.length;)m[e]==this.dataset.id?(m.splice(e,1),e=m.length+1):e++}});window.addEventListener("beforeunload",function(){var e=new XMLHttpRequest;e.onreadystatechange=function(){4===e.readyState&&200===e.status&&e.responseText},e.open("POST","./includes/add_user_galery.php",!0),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded");var t=n(m);e.send(t)});for(var v=document.querySelectorAll(".img_actions"),h=(document.querySelectorAll(".modal"),document.querySelectorAll(".add_button"),0);h<v.length;h++)v[h].addEventListener("click",function(){this.nextElementSibling.nextElementSibling.style.display="block"});for(var y=document.querySelectorAll(".modal_close"),g=0;g<y.length;g++)console.log("modal close"),y[g].addEventListener("click",function(){var e=document.querySelector(".add_popup");0==e&&(e.style.display="none"),this.parentNode.style.display="none"});var E=document.querySelector(".dropdown"),L=document.querySelector(".dropdown_menu");E.addEventListener("click",function(){"true"==this.dataset.toggle?(L.style.display="none",this.dataset.toggle="false"):(L.style.display="block",this.dataset.toggle="true")})});