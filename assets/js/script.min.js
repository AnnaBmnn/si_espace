window.addEventListener("load",function(){function e(e,n,l){var o=e.scrollTop,a=n-o,d=function(n){n+=20;var r=t(n,o,a,l);e.scrollTop=r,n<l&&setTimeout(function(){d(n)},20)};d(0)}function t(e,t,n,l){return(e/=l/2)<1?n/2*e*e+t:(e-=1,-n/2*(e*(e-2)-1)+t)}function n(e){console.log(e)}function l(e){for(var t="",n=0;n<e.length;n++)t=0==n?n+"="+e[n]:t+"&"+n+"="+e[n];return t}function o(e){for(var t=JSON.parse(e),n=document.querySelector(".gallery_display"),l=0;l<t.length;l++){var o=document.createElement("div");o.classList.add("img_container");var a=document.createElement("div");a.classList.add("img_actions"),o.appendChild(a);var d=document.createElement("div");d.classList.add("corner_top_left"),a.appendChild(d);var r=document.createElement("div");r.classList.add("corner_top_right"),a.appendChild(r);var s=document.createElement("div");s.classList.add("corner_bottom_left"),a.appendChild(s);var i=document.createElement("div");i.classList.add("corner_bottom_right"),a.appendChild(i);var c=document.createElement("div");c.classList.add("img_plus"),c.dataset.id=t[l].id,c.dataset.like=t[l].like,c.innerHTML="+",a.appendChild(c),o.appendChild(a);var u=document.createElement("img");u.src=t[l].url,o.appendChild(u),n.appendChild(o),c.addEventListener("dblclick",function(){if("false"==this.dataset.like)p[p.length]=this.dataset.id,this.dataset.like="true",this.dataset.test="true";else{var e=0;for(this.dataset.like="false";e<p.length;)p[e]==this.dataset.id?(p.splice(e,1),e=p.length+1):e++}console.log(p)})}}var a=document.querySelector("body"),d=document.querySelector(".loader"),r=document.querySelector("header"),s=document.querySelector("#content"),i=document.querySelector(".back_top"),c=(document.querySelectorAll(".log_out"),document.querySelector(".gallery_display"));console.log(c),a.classList.remove("preload"),d.style.display="none",r.classList.remove("preload"),s.classList.remove("preload"),window.addEventListener("scroll",function(){document.body.scrollTop>=1800?i.style.display="inherit":i.style.display="none"}),i.addEventListener("click",function(){e(document.body,0,1e3)});for(var u=document.querySelectorAll(".img_plus"),a=document.querySelector("body"),p=[],m=0;m<u.length;m++)"true"==u[m].dataset.like&&(p[p.length]=u[m].dataset.id);var h=1,v=!1;window.addEventListener("scroll",function(){if(document.body.scrollTop==getScrollTopMax()&&(h+=1,v=!0)){var e=new XMLHttpRequest;e.onreadystatechange=function(){4===e.readyState&&200===e.status&&o(e.responseText)},e.open("POST","includes/upload_more_picture.php",!0),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),e.send("load="+h)}}),getScrollTopMax=function(){var e;return null!=(e=document.scrollingElement.scrollTopMax)?e:document.scrollingElement.scrollHeight-document.documentElement.clientHeight};for(var m=0;m<u.length;m++)u[m].addEventListener("dblclick",function(){if("false"==this.dataset.like)p[p.length]=this.dataset.id,this.dataset.like="true",this.dataset.test="true";else{var e=0;for(this.dataset.like="false";e<p.length;)p[e]==this.dataset.id?(p.splice(e,1),e=p.length+1):e++}console.log(p)});window.addEventListener("beforeunload",function(){var e=new XMLHttpRequest;e.onreadystatechange=function(){4===e.readyState&&200===e.status&&n(e.responseText)},e.open("POST","includes/add_user_galery.php",!0),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded");var t=l(p);e.send(t)})});