window.addEventListener("load",function(){function e(e,n,d){var a=e.scrollTop,l=n-a,i=function(n){n+=20;var o=t(n,a,l,d);e.scrollTop=o,n<d&&setTimeout(function(){i(n)},20)};i(0)}function t(e,t,n,d){return(e/=d/2)<1?n/2*e*e+t:(e-=1,-n/2*(e*(e-2)-1)+t)}function n(e){console.log(e)}function d(e){for(var t="",n=0;n<e.length;n++)t=0==n?n+"="+e[n]:t+"&"+n+"="+e[n];return t}function a(e){for(var t=JSON.parse(e),n=document.querySelector(".gallery_display"),d=0;d<t.length;d++){var a=document.createElement("div");a.classList.add("img_container");var l=document.createElement("div");l.classList.add("img_actions"),a.appendChild(l);var i=document.createElement("div");i.classList.add("img_plus"),i.classList.add("add_collection"),i.dataset.id=t[d].id,i.dataset.like=t[d].like,i.innerHTML="CLICK FOR <br> MORE INFORMATIONS",l.appendChild(i);var o=document.createElement("div");o.classList.add("corner_top_left"),l.appendChild(o);var r=document.createElement("div");r.classList.add("corner_top_right"),l.appendChild(r);var s=document.createElement("div");s.classList.add("corner_bottom_left"),l.appendChild(s);var c=document.createElement("div");c.classList.add("corner_bottom_right"),l.appendChild(c),a.appendChild(l);var u=document.createElement("img");u.src=t[d].url,u.classList.add("img_img"),a.appendChild(u),n.appendChild(a);var p=document.createElement("div");p.classList.add("modal"),a.appendChild(p);var h=document.createElement("div");h.classList.add("line_close"),p.appendChild(h);var v=document.createElement("div");v.classList.add("modal_close"),v.innerHTML=">",p.appendChild(v);var E=document.createElement("div");E.classList.add("modal_content"),p.appendChild(E);var g=document.createElement("img");g.classList.add("modal_img"),g.src=t[d].url,E.appendChild(g);var y=document.createElement("div");y.classList.add("modal_infos"),E.appendChild(y);var L=document.createElement("h3");L.innerHTML="PHOTO <em> #"+t[d].id+"</em>",y.appendChild(L);var f=document.createElement("ul");y.appendChild(f);var _=document.createElement("li");_.innerHTML="Date : "+t[d].date,f.appendChild(_);var C=document.createElement("li2");C.innerHTML="Camera : "+t[d].camera,f.appendChild(C);var T=document.createElement("div");if(T.classList.add("add_button"),T.classList.add("add_collection"),T.dataset.id=t[d].id,T.dataset.like=t[d].like,y.appendChild(T),"true"==t[d].session)if("false"==t[d].like)T.innerHTML="+ ADD TO YOUR COLLECTION";else{var S=document.createElement("a");S.href="?delete="+t[d].id,S.innerHTML="- DELETE FROM YOUR COLLECTION",T.appendChild(S)}else{var k=document.createElement("a");k.href="pages/sign_up.php",k.innerHTML="SUBSCRIBE TO SAVE PICTURE",T.appendChild(k)}var q=document.createElement("a");q.href="pages/sign_up.php",q.classList.add("twitter"),q.innerHTML="https://twitter.com/intent/tweet?text=Rover's Eyes Photo nÂ°"+t[d].id+" "+t[d].url,y.appendChild(q),q.innerHTML="TWEET";var w=document.createElement("img");w.src="assets/img/twitter.png",q.appendChild(w),v.addEventListener("click",function(){this.parentNode.style.display="none"}),l.addEventListener("click",function(){this.nextElementSibling.nextElementSibling.style.display="block"}),T.addEventListener("click",function(){if("false"==this.dataset.like){m[m.length]=this.dataset.id,this.dataset.like="true",this.dataset.test="true";document.querySelector(".add_popup").style.display="inherit"}else{var e=0;for(this.dataset.like="false";e<m.length;)m[e]==this.dataset.id?(m.splice(e,1),e=m.length+1):e++}})}}var l=document.querySelector("body"),i=document.querySelector(".loader"),o=document.querySelector("header"),r=document.querySelector("#content"),s=document.querySelector(".back_top"),c=(document.querySelectorAll(".log_out"),document.querySelector(".accueil")),u=document.querySelector(".gallery_display");console.log(u),l.classList.remove("preload"),i.style.display="none",o.classList.remove("preload"),r.classList.remove("preload"),window.addEventListener("scroll",function(){document.body.scrollTop>=1800?s.style.display="inherit":s.style.display="none"}),s.addEventListener("click",function(){e(document.body,0,1e3)});for(var p=document.querySelectorAll(".add_collection"),l=document.querySelector("body"),m=[],h=0;h<p.length;h++)"true"==p[h].dataset.like&&(m[m.length]=p[h].dataset.id);var v=1,E=!1;window.addEventListener("scroll",function(){if(document.body.classList.contains("accueil")&&c.scrollTop==getScrollTopMax()&&(v+=1,E=!0)){var e=new XMLHttpRequest;e.onreadystatechange=function(){4===e.readyState&&200===e.status&&a(e.responseText)},e.open("POST","includes/upload_more_picture.php",!0),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),e.send("load="+v)}}),getScrollTopMax=function(){var e;return null!=(e=document.scrollingElement.scrollTopMax)?e:document.scrollingElement.scrollHeight-document.documentElement.clientHeight};for(var h=0;h<p.length;h++)p[h].addEventListener("click",function(){if(console.log("ok"),"false"==this.dataset.like)m[m.length]=this.dataset.id,this.dataset.like="true",this.dataset.test="true";else{var e=0;for(this.dataset.like="false";e<m.length;)m[e]==this.dataset.id?(m.splice(e,1),e=m.length+1):e++}console.log(m)});window.addEventListener("beforeunload",function(){var e=new XMLHttpRequest;e.onreadystatechange=function(){4===e.readyState&&200===e.status&&n(e.responseText)},e.open("POST","./includes/add_user_galery.php",!0),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded");var t=d(m);e.send(t)});for(var g=document.querySelectorAll(".img_actions"),h=(document.querySelectorAll(".modal"),document.querySelectorAll(".add_button"),0);h<g.length;h++)g[h].addEventListener("click",function(){this.nextElementSibling.nextElementSibling.style.display="block"});for(var y=document.querySelectorAll(".modal_close"),L=0;L<y.length;L++)y[L].addEventListener("click",function(){var e=document.querySelector(".add_popup");console.log("ok"),e.style.display="none",this.parentNode.style.display="none"})});