window.addEventListener("load",function(){function e(e,n,d){var a=e.scrollTop,l=n-a,i=function(n){n+=20;var o=t(n,a,l,d);e.scrollTop=o,n<d&&setTimeout(function(){i(n)},20)};i(0)}function t(e,t,n,d){return(e/=d/2)<1?n/2*e*e+t:(e-=1,-n/2*(e*(e-2)-1)+t)}function n(e){console.log(e)}function d(e){for(var t="",n=0;n<e.length;n++)t=0==n?n+"="+e[n]:t+"&"+n+"="+e[n];return t}function a(e){for(var t=JSON.parse(e),n=document.querySelector(".gallery_display"),d=0;d<t.length;d++){var a=document.createElement("div");a.classList.add("img_container");var l=document.createElement("div");l.classList.add("img_actions"),a.appendChild(l);var i=document.createElement("div");i.classList.add("img_plus"),i.classList.add("add_collection"),i.dataset.id=t[d].id,i.dataset.like=t[d].like,i.innerHTML="CLICK FOR <br> MORE INFORMATIONS",l.appendChild(i);var o=document.createElement("div");o.classList.add("corner_top_left"),l.appendChild(o);var r=document.createElement("div");r.classList.add("corner_top_right"),l.appendChild(r);var s=document.createElement("div");s.classList.add("corner_bottom_left"),l.appendChild(s);var c=document.createElement("div");c.classList.add("corner_bottom_right"),l.appendChild(c),a.appendChild(l);var u=document.createElement("img");u.src=t[d].url,u.classList.add("img_img"),a.appendChild(u),n.appendChild(a);var p=document.createElement("div");p.classList.add("modal"),a.appendChild(p);var h=document.createElement("div");h.classList.add("line_close"),p.appendChild(h);var v=document.createElement("div");v.classList.add("modal_close"),v.innerHTML=">",p.appendChild(v);var g=document.createElement("div");g.classList.add("modal_content"),p.appendChild(g);var E=document.createElement("img");E.classList.add("modal_img"),E.src=t[d].url,g.appendChild(E);var L=document.createElement("div");L.classList.add("modal_infos"),g.appendChild(L);var f=document.createElement("h3");f.innerHTML="PHOTO <em> #"+t[d].id+"</em>",L.appendChild(f);var y=document.createElement("ul");L.appendChild(y);var C=document.createElement("li");C.innerHTML="Date : "+t[d].date,y.appendChild(C);var T=document.createElement("li2");T.innerHTML="Camera : "+t[d].camera,y.appendChild(T);var _=document.createElement("div");if(_.classList.add("add_button"),_.classList.add("add_collection"),_.dataset.id=t[d].id,_.dataset.like=t[d].like,L.appendChild(_),"true"==t[d].session)"false"==t[d].like?_.innerHTML="+ ADD TO YOUR COLLECTION":_.innerHTML="- DELETE FROM YOUR COLLECTION";else{var S=document.createElement("a");S.href="pages/sign_up.php",S.innerHTML="SUBSCRIBE TO SAVE PICTURE",_.appendChild(S)}var k=document.createElement("a");k.href="pages/sign_up.php",k.classList.add("twitter"),k.innerHTML="https://twitter.com/intent/tweet?text=Rover's Eyes Photo nÂ°"+t[d].id+" "+t[d].url,L.appendChild(k),k.innerHTML="TWEET";var w=document.createElement("img");w.src="assets/img/twitter.png",k.appendChild(w),v.addEventListener("click",function(){this.parentNode.style.display="none"}),l.addEventListener("click",function(){this.nextElementSibling.nextElementSibling.style.display="block"}),_.addEventListener("click",function(){if("false"==this.dataset.like)m[m.length]=this.dataset.id,this.dataset.like="true",this.dataset.test="true";else{var e=0;for(this.dataset.like="false";e<m.length;)m[e]==this.dataset.id?(m.splice(e,1),e=m.length+1):e++}})}}var l=document.querySelector("body"),i=document.querySelector(".loader"),o=document.querySelector("header"),r=document.querySelector("#content"),s=document.querySelector(".back_top"),c=(document.querySelectorAll(".log_out"),document.querySelector(".gallery_display"));console.log(c),l.classList.remove("preload"),i.style.display="none",o.classList.remove("preload"),r.classList.remove("preload"),window.addEventListener("scroll",function(){document.body.scrollTop>=1800?s.style.display="inherit":s.style.display="none"}),s.addEventListener("click",function(){e(document.body,0,1e3)});for(var u=document.querySelectorAll(".add_collection"),l=document.querySelector("body"),m=[],p=0;p<u.length;p++)"true"==u[p].dataset.like&&(m[m.length]=u[p].dataset.id);var h=1,v=!1;window.addEventListener("scroll",function(){if(document.body.scrollTop==getScrollTopMax()&&(h+=1,v=!0)){var e=new XMLHttpRequest;e.onreadystatechange=function(){4===e.readyState&&200===e.status&&a(e.responseText)},e.open("POST","includes/upload_more_picture.php",!0),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),e.send("load="+h)}}),getScrollTopMax=function(){var e;return null!=(e=document.scrollingElement.scrollTopMax)?e:document.scrollingElement.scrollHeight-document.documentElement.clientHeight};for(var p=0;p<u.length;p++)u[p].addEventListener("click",function(){if(console.log("ok"),"false"==this.dataset.like)m[m.length]=this.dataset.id,this.dataset.like="true",this.dataset.test="true";else{var e=0;for(this.dataset.like="false";e<m.length;)m[e]==this.dataset.id?(m.splice(e,1),e=m.length+1):e++}console.log(m)});window.addEventListener("beforeunload",function(){var e=new XMLHttpRequest;e.onreadystatechange=function(){4===e.readyState&&200===e.status&&n(e.responseText)},e.open("POST","./includes/add_user_galery.php",!0),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded");var t=d(m);e.send(t)});var g=document.querySelectorAll(".img_actions"),E=document.querySelectorAll(".modal");document.querySelectorAll(".add_button");console.log(E);for(var p=0;p<g.length;p++)g[p].addEventListener("click",function(){this.nextElementSibling.nextElementSibling.style.display="block"});for(var L=document.querySelectorAll(".modal_close"),f=0;f<L.length;f++)L[f].addEventListener("click",function(){this.parentNode.style.display="none"})});